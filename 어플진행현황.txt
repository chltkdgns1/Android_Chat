
로그인 -> 이미 로그인된 상태라면 User current 에서 uid 를 가져올 수 있다.
	그리고 해당 uid 로 유저 정보를 가져와서 유저 정보에 푸시알림 토큰을 저장시
	켜준다. 이것은 어플을 접속할때마다 매번 갱신시켜줌

푸시 알림의 정의 :
	먼저 푸시 알림을 보내기 위해서는 각각의 토큰별로 따로 보내야한다.
	예를 들어, 유저들의 모든 대화가 모든 유저한테 날아가서 받아야될지 말지
	걸러주는 프로그램은 효율도 효율이고 메모리 낭비도 심하다.
	따라서 방에 입장한 그 맴버들에게만 푸쉬알림을 보내야한다.

여기서 의문이다.

굳이 이 기능을 사용해야 하는가? 하지만 사용할 수밖에 없다.

먼저 사용 안하려고 한 이유 : 
	예를 들어, database 에 대화내용이 올라와서 자체적으로 푸시알림을 생성하면
	되지 않냐라고 반문을 했지만 결과적으로 어플이 화면에 올라오지 않으면
	푸시알림을 생성하는 코드가 실행되지 않는다. 물론, 백그라운드에서 실행시키는
	방법이 있을 수 있다. 

 	(1. 방금 찾아본 결과에 의하면 서비스를 죽지 않게 하는 방법이 있다

	서비스를 죽지 않은 상태에서 어떻게 프로그램이 실행될지는 잘 모르겠지만 아마 
	바쁜 대기 상태에서 메시지가 오는지 체크를 하고 해당 룸에 메시지가 도착하면
	자동으로 푸시 알림을 나타나게 하는 방법이 있다.
	단, 이렇게 할 경우 핸드폰 자체에서 굉장히 악영향을 끼칠(?) 수 있다.
	그 이유는 안드로이드 8.0(?) 9.0(?) 둘 중 하나부터 서비스에 영향을 끼칠 수 있다고
	판단하여 백그라운드 실행되는 것을 막았기 때문이다. )

	2. !! 따라서 기본적으로 각각의 클라이언트 어플에 서버를 탑재해서 구글에 보내 적절한 토큰들에게 
	푸시알림을 보내는 방식으로 진행하려고 한다. 

	아마 여유가 된다면 2가지 모두 구현하는쪽으로 가는게 좋을 것 같다.


푸시 알림 2번째 방법 채택안
	데이터 베이스 Users 에 uid 뿐만 아니라 토큰 정보까지 포함시킨다
	users - uid - room
		 - usernickname
		 - 토큰

	의 형태를 뛸 것으로 예상한다.
	
	이렇게 한 이유는 각각의 유저에 맞게 토큰과 매칭해서 보내야 하기 때문이다.
	
	이런 상태에서 

	room - room_uid - room people count - 총 방 인원수
			read cnt   - 읽은 유저수 
			message   - 메세지
			usertoken  - 토큰 ...
	
	room 의 형태는 이렇다
	아직까지 룸을 이루는 코드는 1도 작성을 안했기 때문에 정말 초안이다.


현 진행 상황 ( << 이 부분 아래로 수정하면됨 위의 )
	1. 페이스북 로그인 가능
	2. 페이스북 로그인이 되있다면 로그인 작업 없이 바로 로그인 가능 
		(단, 정말 이런지는 실험이 되어 있지 않아서 실험을 해봐야함)
	3. 회원가입 및 그 회원가입한 정보로 로그인하는 기능은 추후에 구현해야함
		(어차피 네이버 카카오 로그인으로 대체할 것이여서 사실상 구색맞추기)
	4. 룸 리스트에 대한 것이 구현을 해야함
	5. 채팅방은 얼추 완성됬음. 다만, 숫자 사라지는것과 삭제 기능 이런 기능을 추가해야함)
	6. 현재 만들고 있는 것은 푸시 알림 기능 추가하려고함
	 ( 따라서 룸 리스트가 없기 때문에 먼저 서버 코드를 집어넣고 모든 사람에게 푸시 알림을 보내는 기능으로 하면
		될 것 같음)


	6번에 대한 코드 진행된 나의 계획
		페이스북 로그인은 나밖에 안되기 때문에 테스팅에 힘들고, 따라서 그냥 로그인 되었을 경우에도 
		푸시 알림 토큰을 생성해서 저장함. (임의로 처리함)
		(auth 기능은 사용하기 힘들 것임 아마도..;?)
		여튼 이렇게 진행하면 페이스북 사용자든 일반 로그인이든 푸시 알림 토큰은 생성 되었고
		일반 사용자의 경유 uid 는 1부터 시작해서 long long 값씩 하니씩 증가하는 식으로 임의로 생각해두었음
		그래서 각각의 토큰을 room 이 없기 때문에 임의의 tokenCollecter 에 모아서 해당 내부에 있는 토큰들에게만
		푸시 알림을 보내는 걸로 생각하고 있음
		바로 시작해보자

	2020 - 02 - 18 

		푸시 알림을 거의 완벽하게 코드를 완성했다.
		다만 룸  기반에 몇몇의 특정 유저에게 푸시 알림을 하기 위해서는 
		확실한 룸 코드가 필요하다.
		
		그리고 로그인 부분 보완이 필요할 것 같다.
		그 이유는 일단 로그인 한 유저에 한해서 푸시 알림이 가는 것이 맞다.
		예를 들어, 로그인을 하지 않은 상태에서 푸시 알림이 가는 것은 옳지 않다.
		따라서 로그인 부분에 한해서 로그인한 uid 를 저장하고, 그에 따라 실행하는게 옳다고 생각한다.

		먼저 메시지를 보낸다고 했을 때, 

		로그인한 유저한테는 푸시 알림 ( 채팅방에는 접속하지 않은 상태)
		비로그인 유저한테는 푸시 알림이 가지 않게 한다.
		
		따라서 먼저 룸 내부에 있는 유저 목록 (uid 목록) 을 기반으로 Logined 로 접근해서 로그인 접속이 되었는지 체크한다.

		다만 이부분에 대해서 생각해야 할 것은 굳이 구현해야 하나 라는 것이다.
		네이버, 카카오, 페이스북 로그인 연동으로 진행될 것이지만, 기존의 로그인  시스템도 있는 것이 좋을 것 같다.
		따라서 이 기반을 추가한다고 하였을 때, 이메일 인증이나 문자인증같은 기능을 이용하면 더 좋을 것 같다.
		(비용이 드는지 체크를 해봐야 할 것 같음)

		
	
	
		








